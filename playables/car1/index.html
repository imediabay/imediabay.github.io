<!DOCTYPE html>
<html>

<head>

    <meta charset="UTF-8">
    <title>iOPEX</title>
    <link rel='shortcut icon' type='image/x-icon' href='favicon.ico' />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1, IE=Edge">
    <meta name="format-detection" content="telephone=no">
    <meta name="HandheldFriendly" content="true" />
    <meta name="robots" content="noindex,nofollow" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="viewport" content="initial-scale=1 maximum-scale=1 user-scalable=0 minimal-ui" />

    <style>
        html {
            width: 100%;
            height: 100%;
        }
        
        body {
            margin: 0px 0px 1px 0px;
            /* the extra 1px allows the iOS inner/outer check to work */
            padding: 0;
            background: #fff;
            overflow: hidden;
            width: 100%;
            height: 100%;
        }
    </style>
    <title>Game</title>
    <!-- Google Tag Manager -->
    <script>
        (function(w, d, s, l, i) {
            w[l] = w[l] || [];
            w[l].push({
                'gtm.start': new Date().getTime(),
                event: 'gtm.js'
            });
            var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s),
                dl = l != 'dataLayer' ? '&l=' + l : '';
            j.async = true;
            j.src =
                'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
            f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-T2JK233D');
    </script>
    <!-- End Google Tag Manager -->

</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T2JK233D"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div style="font-family:font1; position:absolute; left:-1000px; visibility:hidden;">.</div>
    <div id="loader"></div>
    <div id='game'></div>
    <script src="lib/phaser.min.js"></script>
    <script src='main.js' type='module'></script>
    <script>
        function check_iOS() {
            return [
                    'iPad Simulator',
                    'iPhone Simulator',
                    'iPod Simulator',
                    'iPad',
                    'iPhone',
                    'iPod'
                ].includes(navigator.platform)
                // iPad on iOS 13 detection
                ||
                (navigator.userAgent.includes("Mac") && "ontouchend" in document)
        }

        function onPromoClick() {
            dataLayer.push({
                fiat_lollapalooza: null
            });
            dataLayer.push({
                event: "uber_privacy_notice"
            });
            console.log("uber_privacy_notice")
            if (check_iOS()) {
                window.location.assign(
                    'https://www.uber.com/legal/en/document/?name=cookie-notice&country=brazil&lang=pt-br')
            } else {

                window.open('https://www.uber.com/legal/en/document/?name=cookie-notice&country=brazil&lang=pt-br');
            }

        }


        function onFailedPromoCTAClick() {
            dataLayer.push({
                fiat_lollapalooza: null
            });
            dataLayer.push({
                event: "failed_screen_cta"
            });
            console.log("failed_screen_cta");

            if (check_iOS()) {
                window.location.assign(
                    'https://www.fiat.com.br/')
            } else {

                window.open('https://www.fiat.com.br/');
            }
        }

        function onWinPromoCTAClick() {
            dataLayer.push({
                fiat_lollapalooza: null
            });
            dataLayer.push({
                event: "win_screen_cta"
            });
            console.log("win_screen_cta");
            if (check_iOS()) {
                window.location.assign(
                    'https://www.fiat.com.br/')
            } else {

                window.open('https://www.fiat.com.br/');
            }
        }

        function onStartClick() {
            dataLayer.push({
                fiat_lollapalooza: null
            });
            dataLayer.push({
                event: "start"
            });
            console.log("start")
        }

        function onCompleteClick() {
            dataLayer.push({
                fiat_lollapalooza: null
            });
            dataLayer.push({
                event: "game_complete"
            });
            console.log("game_complete")
        }

        function onGameFailedClick() {
            dataLayer.push({
                fiat_lollapalooza: null
            });
            dataLayer.push({
                event: "game_failed"
            });
            console.log("game_failed");
        }

        function onFailedPlayAgainClick() {
            dataLayer.push({
                fiat_lollapalooza: null
            });
            dataLayer.push({
                event: "failed_screen_playagain"
            });
            console.log("failed_screen_playagain");

        }

        function onWinPlayAgainClick() {
            dataLayer.push({
                fiat_lollapalooza: null
            });
            dataLayer.push({
                event: "win_screen_playagain"
            });

            console.log("win_screen_playagain");
        }
    </script>
</body>

</html>